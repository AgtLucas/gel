<!doctype html>
<html lang="en" class="b-pw-1280 b-reith-sans-font b-reith-serif-font no-js">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="/gel/static/images/favicon.ico" type="image/x-icon">

    <title>GEL | Comments Demo</title>

    <link rel="stylesheet" type="text/css" href="/gel/static/css/gel.css">

    <script type="text/javascript"> // feature detects
        document.documentElement.className = document.documentElement.className.replace(' no-js', ' js');
        document.documentElement.className += (' ' + ('ontouchstart' in document.documentElement ? 'touch' : 'no-touch'));
        document.documentElement.className += (' ' + ('flexWrap' in document.documentElement.style ? 'flex' : 'no-flex'));
        document.documentElement.className += (' ' + ((document.createElementNS && 'createSVGRect' in document.createElementNS('http://www.w3.org/2000/svg', 'svg')) ? 'svg' : 'no-svg'));
    </script>

    
</head>

<body class="gel-guideline-body">
    <main id="main" class="gel-wrap gs-u-clearfix">
        <div class="gel-layout">
            <div class="gel-layout__item gel-5/5@l" style="padding-right: 12px;">
                <h1 class="gel-guideline-header__title">Comments</h1>
            </div>
        </div>

        <div class="gel-layout">
            <div class="gel-guideline-sections gel-body-copy gel-layout__item gel-5/5@l">
                <h2>Reference implementation</h2>

                
<div class="gel-comments">
  <form class="gel-comments__form" id="comment-form">
    <p>
      You're signed in as <strong>Your Name</strong>.
      <a href="https://account.bbc.com/signout">Sign out</a>
    </p>
    <div class="gel-form__divider">
      <label for="comment">Add your comment:</label>
      <textarea id="comment" name="comment" rows="5"></textarea>
      <div class="gel-form__field-error" id="comment-error"></div>
    </div>
    <div class="gel-form__divider">
      <div class="gel-comments__success" role="status" aria-live="polite"></div>
    </div>
    <div class="gel-form__divider">
      <button class="gel-button" type="submit" aria-describedby="disclaimer" disabled>Post comment</button>
    </div>
    <p id="disclaimer">All comments are <a
        href="https://www.bbc.co.uk/social/moderation/house-rules">reactively-moderated</a> and must follow <a
        href="https://www.bbc.co.uk/social/moderation/house-rules">the rules</a>.</p>
  </form>
  <fieldset class="gel-comments__sort-controls">
    <legend>Sort by</legend>
    <label>
      <input name="sort" type="radio" value="timeDesc" checked>
      <span>Newest first</span>
    </label>
    <label>
      <input name="sort" type="radio" value="timeAsc">
      <span>Oldest first</span>
    </label>
  </fieldset>
  <div class="gel-comments__stream">
    <noscript>You cannot read or write comments with JavaScript disabled. Please enable JavaScript and refresh the
      page.</noscript>
  </div>
  <div class="gel-comments__add-link">
    <a href="#comment">Add your comment</a>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    window.gel && gel.Comments.init();

    var testData = [
      {
        id: 'z50fsmh2h',
        time: 1562746598697,
        name: 'Clive Warren',
        comment: 'I like this very much.'
      },
      {
        id: '4wi00jios',
        time: 1562746727083,
        name: 'Clive Smythe',
        comment: 'I do not understand this at all.'
      },
      {
        id: 'm1tx9pbj2',
        time: 1562747117059,
        name: 'Clive Henderson',
        comment: 'I don\'t like this at all and think it\'s bad.'
      },
      {
        id: 'lmu4jrrnt',
        time: 1562762936794,
        name: 'Clive Skogsberg',
        comment: 'I\'m <span>indifferent</span>, to be perfectly honest.'
      }
    ];

    var comments = new gel.Comments.constructor('.gel-comments', {
      data: testData,
      template: function (props) {
        if (props.length < 1) {
          return '<p><strong>There are no comments so far.</strong></p>';
        }
        return '<ul class="gel-comments__stream">' + props.map(function (item) {
          var timeParsed = new Date(item.time);
          var date = (new Date(item.time)).toLocaleDateString('en-GB', { month: 'short', day: 'numeric', year: 'numeric' });
          var time = timeParsed.getHours() + ':' + timeParsed.getMinutes();
          return '' +
            '<li class="gel-comment" id="' + item.id + '" tabindex="-1">' +
            '<h3>' + item.name + ' <time datetime="' + timeParsed.getFullYear() + "-" + (timeParsed.getMonth() + 1) + "-" + timeParsed.getDate() + 'T' + timeParsed.getHours() + ":" + timeParsed.getMinutes() + '">on ' + date + ' at ' + time + '</time></h3>' +
            '<div>' + item.comment + '</div>' +
            '<div class="gel-comment__options">' +
            '<a href="https://www.bbc.co.uk/moderation/complaints/comments/' + this.id + '">Report</a>' +
            '<a href="#' + item.id + '">Link to</a>' +
            '</div>' +
            '</li>';
        }).join('') + '</ul>';
      }
    });

    comments.render();

    var sortControls = document.querySelector('.gel-comments__sort-controls');
    sortControls.addEventListener('change', function (e) {
      comments.sortBy(e.target.value);
    });

    var rules = [
      {
        name: 'comment',
        required: true,
      }
    ];

    window.gel && gel.Validation.init();
    var form = document.getElementById('comment-form');
    var formValidation = new gel.Validation.constructor(form, rules)
  });
</script>
            </div>
        </div>
    </main>

    <script nomodule defer type="text/javascript" src="/gel/static/js/external-svg-polyfill.js"></script>
    <script type="text/javascript" src="/gel/static/js/gel.js"></script>

    
</body>

</html>