<!doctype html>
<html lang="en" class="b-pw-1280 b-reith-sans-font b-reith-serif-font no-js">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="/gel/static/images/favicon.ico" type="image/x-icon">

    <title>GEL | Comments Demo</title>

    <link rel="stylesheet" type="text/css" href="/gel/static/css/gel.css">

    <script type="text/javascript"> // feature detects
        document.documentElement.className = document.documentElement.className.replace(' no-js', ' js');
        document.documentElement.className += (' ' + ('ontouchstart' in document.documentElement ? 'touch' : 'no-touch'));
        document.documentElement.className += (' ' + ('flexWrap' in document.documentElement.style ? 'flex' : 'no-flex'));
        document.documentElement.className += (' ' + ((document.createElementNS && 'createSVGRect' in document.createElementNS('http://www.w3.org/2000/svg', 'svg')) ? 'svg' : 'no-svg'));
    </script>

    
</head>

<body class="gel-guideline-body">
    <main id="main" class="gel-wrap gs-u-clearfix">
        <div class="gel-layout">
            <div class="gel-layout__item gel-5/5@l" style="padding-right: 12px;">
                <h1 class="gel-guideline-header__title">Comments</h1>
            </div>
        </div>

        <div class="gel-layout">
            <div class="gel-guideline-sections gel-body-copy gel-layout__item gel-5/5@l">
                <h2>Reference implementation</h2>

                
<style>
  .shadow-box {
    padding: 1rem;
    border-radius: 0.25rem;
    box-shadow: 0 0 0.25rem #ccc;
  }

  .text-align\:right {
    text-align: right;
  }

  .gel-comments__form textarea {
    width: 100%;
    padding: 0.5rem;
  }

  .gel-comments__form [type="submit"][hidden] {
    display: none;
  }

  .gel-comments__form textarea:focus {
    outline: 2px solid;
  }

  .gel-comments__meta {
    display: flex;
    justify-content: space-between;
  }

  .gel-comments__sort {
    position: relative;
  }

  .gel-comments__sort select {
    -webkit-appearance: none;
    appearance: none;
    border: 0;
    background: none;
    font-size: inherit;
    font-family: inherit;
    padding-right: 1em;
  }

  .gel-comments__sort svg {
    width: 0.75em;
    position: absolute;
    right: 0;
    top: 0.25em;
    pointer-events: none;
  }

  .gel-comment__vote {
    display: flex;
    justify-content: flex-end;
    align-items: center;
  }

  .gel-comment__vote *+button {
    margin-left: 0.75rem;
  }

  .gel-comment__vote button+span {
    margin-left: 0.25rem;
  }

  .gel-comment__vote button {
    border: 0;
    padding: 0;
    background: none;
  }

  .gel-comment__vote button[aria-pressed="true"] path {
    fill: #007bb8;
  }

  .gel-comment__vote svg,
  .gel-comment__vote span {
    pointer-events: none;
  }
</style>

<h3>The comments form</h3>

<div class="shadow-box">
  <form class="gel-comments__form">
    <p>You're signed in as <strong><a href="path/to/user/comment/history">Ben</a></strong></p>
    <div class="gel-form__divider">
      <div class="gel-comments__success" role="status" aria-live="polite"></div>
    </div>
    <div class="gel-form__divider">
      <label for="your-comment">Add your comment</label>
      <textarea name="your-comment" id="your-comment"></textarea>
      <div class="gel-form__field-error" id="your-comment-error"></div>
    </div>
    <div class="gel-form__divider">
      <button type="submit" aria-describedby="your-comment-rules" hidden>Post</button>
    </div>
    <p id="your-comment-rules"><small>Comments must follow the <a href="path/to/rules">house rules</a></small>.</p>
  </form>
</div>

<h3>The sorting control</h3>

<p>The meta information subcomponent, with a sorting control devised using a native <code>&lt;select></code> element.
</p>

<div class="shadow-box">
  <div class="gel-comments__meta">
    <span id="comments-count">186 comments</span>
    <label class="gel-comments__sort" for="comments-sort">
      <strong>Show:</strong>
      <select id="comments-sort">
        <option selected>Latest first</option>
        <option>Oldest first</option>
      </select>
      <svg viewBox="0 0 32 32">
        <path d="M16 29L32 3h-7.2L16 18.3 7.2 3H0"></path>
      </svg>
    </label>
  </div>
</div>

<h3>Voting</h3>

<p>An ad hoc script is provided to demonstrate the expected UI behaviour. A production implementation would be
  data-driven, and use declarative rendering.</p>

<div class="shadow-box text-align:right">
  <div class="gel-comment__vote" role="group" aria-label="vote">
    <button aria-pressed="false" aria-descibedby="total-likes-1562746727083">
      <span class="gel-sr">Like</span>
      <svg viewBox="0 0 867.20184 971.79153" class="gel-icon gel-icon--text" focusable="false" aria-hidden="true">
        <path fill="none" stroke="currentColor" stroke-linejoin="round" stroke-linecap="round" stroke-width="65"
          d="m32.813 475h102.3v417.06h-102.3zm233.17 441.18c-15.486-12.012-33.662-26.413-40.391-32.002-7.231-6.007-29.949-11.786-55.559-14.133-46.844 19.297-31.451 19.953-30.701-165.41.343-84.794.602-210.39 2.981-219 3.91-14.139-25.535 11.714 8.147 9.976 27.517-1.419 40.953-5.387 51.365-15.169 7.756-7.286 14.101-15.6 14.101-18.477 40.428-124.46 180.55-236.28 212.84-372.26.232-27.611 14.837-59.605 61.079-56.932 34.58 1.999 69.415 25.867 77.951 38.651 46.429 87.686-50.003 222.01-20.802 279.07 5.313 8.603 12.54 17.854 16.061 20.556s51.453 4.405 106.52 3.783c105.51-1.191 121.54 1.765 149.34 27.529 33.966 60.426-4.9564 100.75-54.915 129.02 97.032 30.052 73.367 120.23-12.868 139.48 110.49 74.569 24.96 115.63-5.413 127.13 72.296 53.117 46.778 97.487 9.854 121.49-47.394 23.828-167.81 18.96-239.13 18.857l-222.3-.322z" />
      </svg>
      <span aria-hidden="true" id="total-likes-1562746727083">216 <span class="gel-sr">total</span></span>
    </button>
    <button aria-pressed="false" aria-descibedby="total-dislikes-1562746727083">
      <span class="gel-sr">Dislike</span>
      <svg viewBox="0 0 867.20184 971.79153" class="gel-icon gel-icon--text" focusable="false" aria-hidden="true">
        <path fill="none" stroke="currentColor" stroke-linejoin="round" stroke-linecap="round" stroke-width="65"
          d="m32.813 496.47h102.3v-417.06h-102.3zm233.17-441.18c-15.486 12.012-33.662 26.413-40.391 32.002-7.231 6.007-29.949 11.786-55.559 14.133-46.844-19.297-31.451-19.953-30.701 165.41.343 84.794.602 210.39 2.981 219 3.91 14.139-25.535-11.714 8.147-9.976 27.517 1.419 40.953 5.387 51.365 15.169 7.756 7.286 14.101 15.6 14.101 18.477 40.428 124.46 180.55 236.28 212.84 372.26.232 27.611 14.837 59.605 61.079 56.932 34.58-1.999 69.415-25.867 77.951-38.651 46.429-87.686-50.003-222.01-20.802-279.07 5.313-8.603 12.54-17.854 16.061-20.556s51.453-4.405 106.52-3.783c105.51 1.191 121.54-1.765 149.34-27.529 33.966-60.426-4.9564-100.75-54.915-129.02 97.032-30.052 73.367-120.23-12.868-139.48 110.49-74.569 24.96-115.63-5.413-127.13 72.296-53.117 46.778-97.487 9.854-121.49-47.394-23.828-167.81-18.96-239.13-18.857l-222.3.322z" />
      </svg>
      <span aria-hidden="true" id="total-dislikes-1562746727083">34 <span class="gel-sr">total</span></span>
    </button>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    /* Sort control script */
    var sorter = document.getElementById('comments-sort');
    sorter.addEventListener('change', function () {
      alert('Sorting changed to: ' + sorter.value);
    });

    /* Voting script */
    var voting = document.querySelector('.gel-comment__vote');
    var votingButtons = Array.prototype.slice.call(voting.querySelectorAll('button'));
    var totals = Array.prototype.slice.call(voting.querySelectorAll('span[id]'));
    voting.addEventListener('click', function (e) {
      var index = votingButtons.indexOf(e.target);
      if (index > -1) {
        var otherIndex = index === 0 ? 1 : 0;
        var pressed = votingButtons[index].getAttribute('aria-pressed') === 'true';
        var otherPressed = votingButtons[otherIndex].getAttribute('aria-pressed') === 'true';
        if (pressed) {
          votingButtons[index].setAttribute('aria-pressed', 'false');
          totals[index].textContent = parseInt(totals[index].textContent) - 1;
        } else {
          votingButtons[index].setAttribute('aria-pressed', 'true');
          totals[index].textContent = parseInt(totals[index].textContent) + 1;
          if (otherPressed) {
            votingButtons[otherIndex].setAttribute('aria-pressed', 'false');
            totals[otherIndex].textContent = parseInt(totals[otherIndex].textContent) - 1;
          }
        }
      }
    }, false);

    /* Comment form script */
    var form = document.querySelector('.gel-comments__form');
    var submitButton = form.querySelector('[type="submit"]');
    var textarea = form.querySelector('textarea');
    var successMsg = form.querySelector('.gel-comments__success');

    textarea.addEventListener('input', function () {
      submitButton.hidden = textarea.value === '';
    });

    textarea.addEventListener('focus', function () {
      if (textarea.value === '') {
        submitButton.hidden = true;
      }
    });

    submitButton.addEventListener('blur', function () {
      successMsg.innerHTML = '';
      submitButton.hidden = true;
    });

    var rules = [
      {
        name: 'your-comment',
        required: true
      }
    ];

    window.gel && gel.Validation.init();
    var formValidation = new gel.Validation.constructor(form, rules);

    form.addEventListener('gel-submitted', function () {
      successMsg.innerHTML = 'Thanks! We will check this as quickly as possible before posting.';
      textarea.value = '';
    });
  });
</script>



<!--<div class="gel-comments">
  <form class="gel-comments__form" id="comment-form">
    <p>
      You're signed in as <strong>Your Name</strong>.
      <a href="https://account.bbc.com/signout">Sign out</a>
    </p>
    <div class="gel-form__divider">
      <label for="comment">Add your comment:</label>
      <textarea id="comment" name="comment" rows="5"></textarea>
      <div class="gel-form__field-error" id="comment-error"></div>
    </div>
    <div class="gel-form__divider">
      <div class="gel-comments__success" role="status" aria-live="polite"></div>
    </div>
    <div class="gel-form__divider">
      <button class="gel-button" type="submit" aria-describedby="disclaimer" disabled>Post comment</button>
    </div>
    <p id="disclaimer">All comments are <a
        href="https://www.bbc.co.uk/social/moderation/house-rules">reactively-moderated</a> and must follow <a
        href="https://www.bbc.co.uk/social/moderation/house-rules">the rules</a>.</p>
  </form>
  <fieldset class="gel-comments__sort-controls">
    <legend>Sort by</legend>
    <label>
      <input name="sort" type="radio" value="timeDesc" checked>
      <span>Newest first</span>
    </label>
    <label>
      <input name="sort" type="radio" value="timeAsc">
      <span>Oldest first</span>
    </label>
  </fieldset>
  <div class="gel-comments__stream">
    <noscript>You cannot read or write comments with JavaScript disabled. Please enable JavaScript and refresh the
      page.</noscript>
  </div>
  <div class="gel-comments__add-link">
    <a href="#comment">Add your comment</a>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    window.gel && gel.Comments.init();

    var testData = [
      {
        id: 'z50fsmh2h',
        time: 1562746598697,
        name: 'Clive Warren',
        comment: 'I like this very much.'
      },
      {
        id: '4wi00jios',
        time: 1562746727083,
        name: 'Clive Smythe',
        comment: 'I do not understand this at all.'
      },
      {
        id: 'm1tx9pbj2',
        time: 1562747117059,
        name: 'Clive Henderson',
        comment: 'I don\'t like this at all and think it\'s bad.'
      },
      {
        id: 'lmu4jrrnt',
        time: 1562762936794,
        name: 'Clive Skogsberg',
        comment: 'I\'m <span>indifferent</span>, to be perfectly honest.'
      }
    ];

    var comments = new gel.Comments.constructor('.gel-comments', {
      data: testData,
      template: function (props) {
        if (props.length < 1) {
          return '<p><strong>There are no comments so far.</strong></p>';
        }
        return '<ul class="gel-comments__stream">' + props.map(function (item) {
          var timeParsed = new Date(item.time);
          var date = (new Date(item.time)).toLocaleDateString('en-GB', { month: 'short', day: 'numeric', year: 'numeric' });
          var time = timeParsed.getHours() + ':' + timeParsed.getMinutes();
          return '' +
            '<li class="gel-comment" id="' + item.id + '" tabindex="-1">' +
            '<h3>' + item.name + ' <time datetime="' + timeParsed.getFullYear() + "-" + (timeParsed.getMonth() + 1) + "-" + timeParsed.getDate() + 'T' + timeParsed.getHours() + ":" + timeParsed.getMinutes() + '">on ' + date + ' at ' + time + '</time></h3>' +
            '<div>' + item.comment + '</div>' +
            '<div class="gel-comment__options">' +
            '<a href="https://www.bbc.co.uk/moderation/complaints/comments/' + this.id + '">Report</a>' +
            '<a href="#' + item.id + '">Link to</a>' +
            '</div>' +
            '</li>';
        }).join('') + '</ul>';
      }
    });

    comments.render();

    var sortControls = document.querySelector('.gel-comments__sort-controls');
    sortControls.addEventListener('change', function (e) {
      comments.sortBy(e.target.value);
    });

    var rules = [
      {
        name: 'comment',
        required: true,
      }
    ];

    window.gel && gel.Validation.init();
    var form = document.getElementById('comment-form');
    var formValidation = new gel.Validation.constructor(form, rules);
  });
</script>-->
            </div>
        </div>
    </main>

    <script nomodule defer type="text/javascript" src="/gel/static/js/external-svg-polyfill.js"></script>
    <script type="text/javascript" src="/gel/static/js/gel.js"></script>

    
</body>

</html>